<!doctype html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <title>Flamme Rouge Kortstyring</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json" />

    <!-- iOS specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Flamme Rouge" />
    <link rel="apple-touch-icon" href="./icon-192.svg" />

    <!-- Theme color -->
    <meta name="theme-color" content="#667eea" />
    <meta name="msapplication-TileColor" content="#667eea" />

    <!-- Viewport enhancements -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />

    <!-- Styles -->
    <link rel="stylesheet" href="./src/styles.css" />

    <!-- Fallback CSS for critical rendering -->
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        text-align: center;
        background-color: #f5f5f5;
      }
      .spiller-sektion {
        margin: 30px 0;
        padding: 20px;
        border: 3px solid;
        border-radius: 12px;
        background-color: white;
        display: block; /* Force visibility for Vercel fallback */
      }
      .spiller-sektion.aktiv {
        display: block;
        box-shadow: 0 0 20px rgba(0, 123, 255, 0.3);
      }
      .spiller-sektion.vis-alle {
        display: block;
        opacity: 1;
      }
      .farve-roed {
        border-color: #dc3545;
      }
      .farve-sort {
        border-color: #343a40;
      }
      .farve-groen {
        border-color: #28a745;
      }
      .farve-blaa {
        border-color: #007bff;
      }
    </style>
  </head>
  <body>
    <!-- ========================================
         FIXED MENU BUTTON
         ======================================== -->
    <button class="menu-knap" onclick="visMmenu()" title="Menu">☰</button>

    <!-- ========================================
         MENU OVERLAY
         ======================================== -->
    <div id="menu-overlay" class="menu-overlay" onclick="skjulMenu()">
      <div class="menu-content" onclick="event.stopPropagation()">
        <h2>🚴‍♂️ Spil Menu 🚴‍♀️</h2>
        <button onclick="visRedigerRyttereMenu()">
          ✏️ Rediger Ryttere
        </button>
        <button
          onclick="blandAlle(); skjulMenu();"
          style="background-color: #6c757d"
        >
          🔀 Bland alle kort
        </button>
        <button
          onclick="nytSpil(); skjulMenu();"
          style="background-color: #28a745"
        >
          🏁 Nyt spil
        </button>
        <button onclick="skjulMenu();" style="background-color: #007acc">
          ← Tilbage til spil
        </button>
      </div>
    </div>

    <!-- ========================================
         RYTTER MENU OVERLAY
         ======================================== -->
    <div id="rytter-menu-overlay" class="menu-overlay" onclick="skjulRytterMenu()">
      <div class="menu-content" onclick="event.stopPropagation()">
        <h2>✏️ Rediger Ryttere</h2>
        <div id="rytter-redigering-liste">
          <!-- Rider edit forms will be injected here -->
        </div>
        <button onclick="skjulRytterMenu()" style="background-color: #007acc">
          ← Tilbage til hovedmenu
        </button>
      </div>
    </div>

    <!-- ========================================
         STORY MODAL OVERLAY
         ======================================== -->
    <div id="historie-overlay" class="menu-overlay" onclick="skjulHistorie()">
      <div class="menu-content" onclick="event.stopPropagation()">
        <h2 id="historie-titel"></h2>
        <p id="historie-tekst" style="text-align: left; white-space: pre-wrap;"></p>
        <button onclick="skjulHistorie()" style="background-color: #007acc">
          Luk
        </button>
      </div>
    </div>

    <!-- ========================================
         MAIN GAME CONTENT
         ======================================== -->
    <div id="main-content" class="main-content">
      <h1>Flamme Rouge Kortstyring</h1>

      <!-- Notification system -->
      <div id="notification" class="notification"></div>

      <!-- Player sections container -->
      <div id="ryttere"></div>

      <!-- Round status display -->
      <div
        id="rundestatus"
        style="margin: 20px 0; font-size: 18px; font-weight: bold"
      ></div>

      <!-- Game control buttons -->
      <div id="spil-knapper" class="spil-knapper">
        <!-- Buttons are dynamically generated -->
      </div>
    </div>

    <!-- ========================================
         RESULTS OVERLAY
         ======================================== -->
    <div id="resultat-container" class="resultat-container">
      <div class="resultat-titel">🏁 Kort Afsløret! 🏁</div>
      <div id="resultat-grid" class="resultat-grid"></div>
      <div class="resultat-footer">
        <button onclick="skjulResultater()">
          🚴‍♂️ Fortsæt til næste runde 🚴‍♀️
        </button>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="./src/app.js"></script>
  </body>
</html>
